<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Image Prediction and Chat</title>
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body>
    <div class="container">
        <div class="row">
            <h1 align="center">Potato Diseases Detection</h1>
            <div class="col-md-6">
                <p><h1 align="center">Upload an Image to be tested</h1></p>
<div class="container">
<div class="row">
    <h2>Select a file to upload</h2>
    <p>
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <ul>
            {% for message in messages %}
              <li>{{ message }}</li>
            {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
    </p>
    {% if filename %}
        <div>
            <img src="{{ url_for('display', filename=filename) }}">
        </div>
    {% endif %}
    <form method="post" action="/potato.html" enctype="multipart/form-data">
        <dl>
            <p>
                <input type="file" name="file" autocomplete="off" style="width: 50%;" required>
            </p>
        </dl>
        <p>
            <input type="submit" value="Predict" class="btn btn-info">
        </p>
    </form>
    {% if predicted_class_name %}
            <div>
                <h3>Predicted Class:</h3>
                <p>{{ predicted_class_name }}</p>
            </div>
    {% endif %}
    {% if error_message %}
        <div>
            <h3>Error:</h3>
            <p>{{ error_message }}</p>
        </div>
    {% endif %}
</div>
</div>
            </div>
            <div class="col-md-6">
                <h2>Chat with the bot:</h2>
        <div id="chat-container">
            <!-- Chat messages will be displayed here -->
        </div>
        <input type="text" id="user-input" placeholder="Type a message...">
        <input type="text" id="user-response" placeholder="Provide your response...">
        <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <!-- Add your JavaScript code for handling chat interactions here -->
    <script>
        function sendMessage() {
            const userMessage = document.getElementById("user-input").value;
            const userResponse = document.getElementById("user-response").value; // Get user response
            document.getElementById("user-response").value = ""; // Clear user response input field

            // Display user message
            const userMessageElement = document.createElement("p");
            userMessageElement.textContent = "You: " + userMessage;
            document.getElementById("chat-container").appendChild(userMessageElement);


            
            // Send user message to the server and get a response
            fetch("/send_message", {
                method: "POST",
                body: JSON.stringify({ message: userMessage , user_response: userResponse}),
                headers: {
                    "Content-Type": "application/json",
                },
            })
                .then((response) => response.json())
                .then((data) => {
                    // Display bot's response
                    const botMessageElement = document.createElement("p");
                    botMessageElement.textContent = "Bot: " + data.message;
                    botMessageElement.classList.add("reply");
                    document.getElementById("chat-container").appendChild(botMessageElement);
                });
            //document.getElementById("user-input").value = "";    
        }
        
    </script>
</body>
</html>




<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Potato Diseases Detection</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
</head>
<body class="h-14 bg-gradien-to-r from-green-400  via-green-300  to-green-600">
    <header class="bg-[#111827] text-gray-100">
        <nav class="flex justify-between items-center w-[92%] mx-auto">
            <div>
                <!-- logo image -->
            </div>
            <div class="nav-links duration-500 md:static absolute md:min-h-fit min-h-[60vh] left-0 top-[-100%] md:w-auto  w-full flex items-center px-5">
                <ul class="flex md:flex-row flex-col md:items-center md:gap-[4vw] gap-8">
                    <li>
                        <a class="hover:text-green-500" href="index.html">Home</a>
                    </li>
                    <li>
                        <a class="hover:text-green-500" href="potato.html" target="_blank">Potato</a>
                    </li>
                    <li>
                        <a class="hover:text-green-500" href="wheat.html" target="_blank">Wheat</a>
                    </li>
                    <li>
                        <a class="hover:text-green-500" href="rice.html" target="_blank">Rice</a>
                    </li>
                    <li>
                        <a class="hover:text-green-500" href="sugarcane.html" target="_blank">Sugarcane</a>
                    </li>
                    <li>
                        <a class="hover:text-green-500" href="corn.html" target="_blank">Corn</a>
                    </li>
                    <li>
                        <a class="hover:text-green-500" href="service.html" target="_blank">Services</a>
                    </li>
                    <li>
                        <a class="hover:text-green-500" href="about.html" target="_blank">About Us</a>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="flex items-center gap-6">
            <button class="bg-green-500 text-white px-5 py-2 rounded-full hover:bg-green-700">Sign in</button>
            <ion-icon onclick="onToggleMenu(this)" name="menu" class="text-3xl cursor-pointer md:hidden"></ion-icon>
        </div>
    </header>
    <div class="flex text-white">
        <div class="right w-full text-white flex justify-center items-center flex-col">
            <div class="text-center w-full text-4xl font-bold mt-10 mb-10">
                BotaniBrain
            </div>

            <div class="flex w-10/12 justify-center items-center">
                <div class="flex flex-col md:flex-row md:space-x-6 space-y-6 md:space-y-0 bg-green-700 w-full p-8 rounded-2xl shadow-2xl text-white overflow-hidden">
                    <div class="flex flex-col space-y-8 justify-around">
                        <h1 class="font-bold text-2xl tracking-wide justify-center items-center">
                            Potato Diseases Detection
                        </h1>
                        <p class="text-sm pt-2">
                            Upload an image of the leaf of your Potato Plant which needs to be predicted. The diseases which can be detected are Potato Early Blight and Potato Late blight. It will answer the plant as Healthy Potato if no disease is found in your plant.
                        </p>
                        <form method="post" action="/potato.html" enctype="multipart/form-data">
                            <dl>
                                <p>
                                    <input type="file" name="file" autocomplete="off" style="width: 50%;" required>
                                </p>
                            </dl>
                            <p>
                                <input type="submit" value="Predict">
                            </p>
                        </form>
                        <p>
                            {% with messages = get_flashed_messages() %}
                              {% if messages %}
                                <ul>
                                {% for message in messages %}
                                  <li>{{ message }}</li>
                                {% endfor %}
                                </ul>
                              {% endif %}
                            {% endwith %}
                        </p>
                        {% if filename %}
                        <div>
                            <img src="{{ url_for('display', filename=filename) }}">
                        </div>
                        {% endif %}
                        {% if predicted_class_name %}
                        <div>
                            <h3>Predicted Class:</h3>
                            <p>{{ predicted_class_name }}</p>
                        </div>
                        {% endif %}
                        {% if error_message %}
                            <div>
                                <h3>Error:</h3>
                                <p>{{ error_message }}</p>
                            </div>
                        {% endif %}
                    </div>

                    <div>
                        <div class="relative z-10 bg-slate-400 p-8 rounded-2xl shadow-2xl text-gray-800 md:w-120">
                            <h2 class="text-md pt-2">Ask your queries here:</h2>
                            <div id="chat-container">
                                <!-- Chat messages will be displayed here -->
                            </div>
                            <input type="text" id="user-input" placeholder="Type a message...">
                            <input type="text" id="user-response" placeholder="Provide your response...">
                            <button onclick="sendMessage()">Send</button>
                        </div>
                    </div>




                </div>
            </div>
        </div>
    </div>







    <!-- <div class="container">
        <div class="row">
            <h1 align="center">Potato Diseases Detection</h1>
            <div class="col-md-6">
                <p><h1 align="center">Upload an Image to be tested</h1></p>
<div class="container">
<div class="row">
    <h2>Select a file to upload</h2>
    <p>
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <ul>
            {% for message in messages %}
              <li>{{ message }}</li>
            {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
    </p>
    {% if filename %}
        <div>
            <img src="{{ url_for('display', filename=filename) }}">
        </div>
    {% endif %}
    <form method="post" action="/potato.html" enctype="multipart/form-data">
        <dl>
            <p>
                <input type="file" name="file" autocomplete="off" style="width: 50%;" required>
            </p>
        </dl>
        <p>
            <input type="submit" value="Predict" class="btn btn-info">
        </p>
    </form>
    {% if predicted_class_name %}
            <div>
                <h3>Predicted Class:</h3>
                <p>{{ predicted_class_name }}</p>
            </div>
    {% endif %}
    {% if error_message %}
        <div>
            <h3>Error:</h3>
            <p>{{ error_message }}</p>
        </div>
    {% endif %}
</div>
</div>
            </div>
            <div class="col-md-6">
                <h2>Chat with the bot:</h2>
        <div id="chat-container">
             Chat messages will be displayed here
        </div>
        <input type="text" id="user-input" placeholder="Type a message...">
        <input type="text" id="user-response" placeholder="Provide your response...">
        <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div> -->

    <!-- Add your JavaScript code for handling chat interactions here -->
    <script>
        function sendMessage() {
            const userMessage = document.getElementById("user-input").value;
            const userResponse = document.getElementById("user-response").value; // Get user response
            document.getElementById("user-response").value = ""; // Clear user response input field

            // Display user message
            const userMessageElement = document.createElement("p");
            userMessageElement.textContent = "You: " + userMessage;
            document.getElementById("chat-container").appendChild(userMessageElement);


            
            // Send user message to the server and get a response
            fetch("/send_message", {
                method: "POST",
                body: JSON.stringify({ message: userMessage , user_response: userResponse}),
                headers: {
                    "Content-Type": "application/json",
                },
            })
                .then((response) => response.json())
                .then((data) => {
                    // Display bot's response
                    const botMessageElement = document.createElement("p");
                    botMessageElement.textContent = "Bot: " + data.message;
                    botMessageElement.classList.add("reply");
                    document.getElementById("chat-container").appendChild(botMessageElement);
                });
            //document.getElementById("user-input").value = "";    
        }
        
    </script>
</body>
</html>
